<div class="row">
  <mdb-breadcrumb customClass="white" class="w-100">
    <mdb-breadcrumb-item class=""><mdb-icon fas icon="cog"></mdb-icon></mdb-breadcrumb-item>
    <mdb-breadcrumb-item class="active">{{titulo}}</mdb-breadcrumb-item>
  </mdb-breadcrumb>
</div>

<div class="section">
  <div class="row pb-2">
    <div class="col">
      <p class="section_titulo_0">{{titulo}}</p>
      <p class="section_subtitulo_0"> </p>
    </div>
  </div>
  <hr>
  <div class=" row mb-3">
    <div class="col">
      <span class="agila-cda-titulo">{{titulo}}</span>
    </div>
  </div>
  <form class="mt-5" [formGroup]="filtrosForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-md-2">
        <!-- Material input -->
        <div class="md-form">
          <mat-form-field>
            <input matInput [matDatepicker]="fechaDesde" placeholder="Desde" [formControl]="fFechaInicio" >
            <mat-datepicker-toggle matSuffix [for]="fechaDesde"></mat-datepicker-toggle>
            <mat-datepicker #fechaDesde disabled="false"></mat-datepicker>
          </mat-form-field>
        </div>
      </div>
      <div class="col-md-2">
        <!-- Material input -->
        <div class="md-form">
          <mat-form-field>
            <input matInput [matDatepicker]="fechaHasta" placeholder="Hasta" [formControl]="fFechaFin">
            <mat-datepicker-toggle matSuffix [for]="fechaHasta"></mat-datepicker-toggle>
            <mat-datepicker #fechaHasta disabled="false"></mat-datepicker>
          </mat-form-field>
        </div>
      </div>

      <div class="col-md-2">
        <div class="md-form">
          <mat-label>Persona</mat-label>
          <mat-select formControlName="fPersonaId"
                      [ngClass]="{ 'is-invalid': submitted && f.fPersonaId.errors }">
            <mat-option *ngFor="let operator of personas;" [value]="operator.value">{{operator.label}}</mat-option>
          </mat-select>
          <div *ngIf="submitted && f.fPersonaId.errors" style="color:red">
            <div *ngIf="f.fPersonaId.errors.required">Requerido</div>
          </div>
        </div>
      </div>
      <div class="col-md-2">
        <div class="md-form">
          <button type="submit" class="btn btn-primary btn-md">Busca empleados</button>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-2">
        <div class="md-form">
          <mat-label>Tipo Cumplimiento</mat-label>
          <mat-select formControlName="fTipoCumplimiento"
                      [ngClass]="{ 'is-invalid': submitted && f.fTipoCumplimiento.errors }" (selectionChange)="getTasks()">
            <mat-option *ngFor="let operator of tiposCumplimientos;" [value]="operator.value">{{operator.label}}</mat-option>
          </mat-select>
          <div *ngIf="submitted && f.fTipoCumplimiento.errors" style="color:red">
            <div *ngIf="f.fTipoCumplimiento.errors.required">Requerido</div>
          </div>
        </div>
      </div>
      <div class="col-md-2">
        <div class="md-form">
          <mat-label>Actividad</mat-label>
          <mat-select formControlName="fActividad"
                      [ngClass]="{ 'is-invalid': submitted && f.fActividad.errors }"  (selectionChange)="getTasks()">
            <mat-option *ngFor="let operator of actividades;" [value]="operator.value">{{operator.label}}</mat-option>
          </mat-select>
          <div *ngIf="submitted && f.fActividad.errors" style="color:red">
            <div *ngIf="f.fActividad.errors.required">Requerido</div>
          </div>
        </div>
      </div>

      <div class="col-md-2">
        <div class="md-form">
          &nbsp;
        </div>
      </div>
      <div class="col-md-2">
        <div class="md-form">
          <button type="button" class="btn btn-primary btn-md" (click)="saveTasks()">Genera Tareas</button>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col">
        <table mdbTable bordered="true">
          <thead class="grey lighten-1 black-text">
          <tr>
            <th *ngFor="let head of headTasks" scope="col">{{head}} </th>
          </tr>
          </thead>
          <tbody>
          <tr mdbTableCol *ngFor="let el of tagTasks; let i = index;">
            <th scope="row">
              <mat-checkbox [checked]="false" (click)="habilitarCheck((i))" >
                {{i+1}}
              </mat-checkbox>
            </th>
            <td>{{el.description}}</td>
            <td><mat-checkbox [value]="tipoPerfil[0]" [checked]="false" [disabled]="checkboxDisabled[i]"
                              (change)="armaMuneco($event)" [name]="i" [id]="i + '_0'" >
            </mat-checkbox></td>
            <td><mat-checkbox [value]="tipoPerfil[1]" [checked]="false" [disabled]="checkboxDisabled[i]"
                              (change)="armaMuneco($event)" [name]="i" [id]="i + '_1'">
            </mat-checkbox></td>
            <td><mat-checkbox [value]="tipoPerfil[2]" [checked]="false" [disabled]="checkboxDisabled[i]"
                              (change)="armaMuneco($event)" [name]="i" [id]="i + '_2'">
            </mat-checkbox></td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </form>
</div>
