<div class="tabla-responsive text-nowrap mat-elevation-z0">
  <!--Navbar-->
  <mdb-navbar SideClass="navbar navbar-expand-lg grey darken-2" [containerInside]="false">
    <mdb-navbar-brand><a class="navbar-brand" href="#"></a></mdb-navbar-brand>
    <links>
      <ul class="navbar-nav ml-auto nav-flex-icons">
        <li class="nav-item">
          <a class="nav-link">
            <img src="http://www.ehu.eus/asignaturasKO/PM/Gestion/gespro11.gif" height="30" width="40" alt="Gantt"
              (click)="mostrarTagGant()">
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link">
            <img src="http://www.objectplanet.com/easycharts/gallery4/images/overlay2.png" height="30" width="40"
              alt="Generar Gráficas" (click)="generarGraficas()">
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link">
            <!--mdb-icon fab icon="google-plus"></mdb-icon-->
            <img src="https://t1.uc.ltmcdn.com/images/4/1/4/img_como_escribir_en_un_pdf_19414_orig.jpg" height="30"
              width="40" alt="Exportar a PDF">
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link">
            <img
              src="https://img.elcomercio.pe/files/ec_article_multimedia_gallery/uploads/2017/10/17/59e669dad2be3.jpeg"
              height="30" width="40" alt="Exportar a Excel">
          </a>
        </li>
      </ul>
    </links>
  </mdb-navbar>
</div>

<!-- CONSULTA DE TAGS -->
<div class="tabla-responsive text-nowrap mat-elevation-z0" *ngIf="verTags">
  <mat-table [dataSource]="registros" matSort mdbTableScroll scrollY="true" maxHeight="500" scrollX="true"
    maxWidth="1100">
    <!-- Position Column -->
    <ng-container matColumnDef="tag" sticky>
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> TAG </th>
      <td mat-cell *matCellDef="let element"> {{element.tag}} </td>
    </ng-container>
    <!-- Name Column -->
    <ng-container matColumnDef="actividad">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Actividad</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tagDTO.actividad.nombre}} </td>
    </ng-container>
    <!-- Name Column -->
    <ng-container matColumnDef="planta">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Planta</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tagDTO.planta.opcion.descripcion}} </td>
    </ng-container>
    <!-- Name Column -->
    <ng-container matColumnDef="elaboradoPor">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Elaborado Por</a></th>
      <td mat-cell *matCellDef="let element">
        <div *ngFor="let actor of element.actores;">
          {{ actor.tagActorId}}
        </div>
      </td>
    </ng-container>
    <!-- Weight Column -->
    <ng-container matColumnDef="responsable">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Responsable</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tag}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="supervisor">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Supervisor</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tag}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="autoridad">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Autoridad</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tagDTO.autoridad.opcion.descripcion}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="tipo">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Tipos</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tagDTO.tipoCumplimiento.opcion.descripcion}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="periodo1">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Periodo</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tagDTO.periodoEntrega.opcion.descripcion}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="tipoDias">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Tipos de días</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tagDTO.tipoDias.opcion.descripcion}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="precedentes">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Precedentes</a></th>
      <td mat-cell *matCellDef="let element">
        <div *ngFor="let precedente of element.procedentes;">
          {{ precedente.tagPrecedenteId}}
        </div>
      </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="documentos">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Documentos</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tag}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="doc1">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Doc</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tag}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="registros">
      <th mat-header-cell *matHeaderCellDef class="text-center"> Registros </th>
      <td mat-cell *matCellDef="let element"> {{element.tag}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="doc2">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Doc</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tag}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="requisitoLegal">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Requisito Legal</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tagDTO.requisitoLegal}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="observaciones">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Observaciones</a></th>
      <td mat-cell *matCellDef="let element"> {{element.tag}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="fechaInicioEventoProgramada">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Fecha de inicio de evento programada</a></th>
      <td mat-cell *matCellDef="let element"> {{element.fechaProgramadaInicio}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="fechaFinEventoProgramada">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Fecha de fin de evento programada</a></th>
      <td mat-cell *matCellDef="let element"> {{element.fechaProgramadaFinal}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="fechaInicioEventoReal">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Fecha de inicio de evento real</a></th>
      <td mat-cell *matCellDef="let element"> {{element.fechaRealInicio}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="fechaFinProgramada">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Fecha de fin programada</a></th>
      <td mat-cell *matCellDef="let element"> {{element.fechaRealFin}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="estatus">
      <th mat-header-cell *matHeaderCellDef mat-sort-header><a>Estatus</a></th>
      <td mat-cell *matCellDef="let element"> {{element.entidadEstatusId}} </td>
    </ng-container>
    <!-- Symbol Column -->
    <ng-container matColumnDef="herramientas">
      <th mat-header-cell *matHeaderCellDef class="text-center"> Herramientas </th>
      <td mat-cell *matCellDef="let element">
        <table>
          <tr>
            <td>
              <a>
                <img src="assets/images/skins/ico_Ver.png" alt="Visualizar">
              </a>
            </td>
            <td>
              <a>
                <img src="assets/images/skins/ico_Editar.png" alt="Modificar">
              </a>
            </td>
            <td>
              <a>
                <img src="assets/images/skins/ico_PDF.png" alt="PDF">
              </a>
            </td>
          </tr>
        </table>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnas"></tr>
    <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
  </mat-table>
</div>



<!-- DIAGRAMA DE GANT -->
<div class="tabla-responsive text-nowrap mat-elevation-z0" *ngIf="verGraficaGant">
  <mat-table [dataSource]="registrosGant" matSort mdbTableScroll scrollY="true" maxHeight="500" scrollX="true"
    maxWidth="1000">
    <!-- Position Column -->
    <ng-container matColumnDef="tag">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> TAG </th>
      <td mat-cell *matCellDef="let element"> {{element.tag}} </td>
    </ng-container>
    <ng-container matColumnDef="actividad">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> Actividad </th>
      <td mat-cell *matCellDef="let element"> {{element.actividad}} </td>
    </ng-container>
    <ng-container matColumnDef="planta">
      <th mat-header-cell *matHeaderCellDef mat-sort-header class="text-center"> Planta </th>
      <td mat-cell *matCellDef="let element"> {{element.planta}} </td>
    </ng-container>
    <!-- Name Column -->
    <ng-container matColumnDef="datosGant">
      <th mat-header-cell *matHeaderCellDef class="text-center">
        <table>
          <tr>
            <td width="1080px" colspan="12">2019</td>
          </tr>
          <tr>
            <td width="90px">Enero</td>
            <td width="90px">Febrero</td>
            <td width="90px">Marzo</td>
            <td width="90px">Abril</td>
            <td width="90px">Mayo</td>
            <td width="90px">Junio</td>
            <td width="90px">Julio</td>
            <td width="90px">Agosto</td>
            <td width="90px">Septiembre</td>
            <td width="90px">Octubre</td>
            <td width="90px">Nobiembe</td>
            <td width="90px">Diciembre</td>
          </tr>
        </table>
      </th>
      <td mat-cell *matCellDef="let element">
        <table>
          <tr>
            <td width="15" *ngFor="let semana of element.colorSemana" [ngSwitch]="semana">
              <div *ngSwitchCase="'GREEN'" style='height:10px; width:10px; background-color:rgb(72, 182, 25)'></div>
              <div *ngSwitchCase="'YELLOW'" style='height:10px; width:10px; background-color:rgb(243, 243, 29)'></div>
              <div *ngSwitchCase="'ORANGE'" style='height:10px; width:10px; background-color:rgb(251, 163, 0)'></div>
              <div *ngSwitchCase="'RED'" style='height:10px; width:10px; background-color:rgb(223, 16, 16)'></div>
            </td>
          </tr>
        </table>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnasGant"></tr>
    <tr mat-row *matRowDef="let row; columns: columnasGant;"></tr>
  </mat-table>
</div>

<div class="tabla-responsive text-nowrap mat-elevation-z0" *ngIf="mostarGraficas">
  <div class="row">
    <div class="sub">
      <table maxWidth="900">
        <tbody>
          <tr>
            <td>
              <p></p>
              <p></p>
              <p></p>
              <p></p>
              <p></p>
              <p></p>
            </td>
          </tr>
          <tr>
            <td class="align-middle">
              <div class="m-4">
                <!-- GRAFICA TIP PIE-->
                <div style="width:400px;">
                  <div style="display: block">
                    <canvas mdbChart [chartType]="chartTypePie" [data]="chartDataPie" [labels]="chartLabelsPie"
                      [colors]="chartColorsPie" [options]="chartOptionsPie" [legend]="true"
                      (chartHover)="chartHoveredPie($event)" (chartClick)="chartClickedPie($event)">
                    </canvas>
                  </div>
                </div>
              </div>
            </td>
            <td> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </td>
            <td>
              <div class="m-4">
                <div style="width:400px;">
                  <div style="display: block">
                    <canvas mdbChart [chartType]="chartType" [datasets]="chartDatasets" [labels]="chartLabels"
                      [colors]="chartColors" [options]="chartOptions" [legend]="true"
                      (chartHover)="chartHovered($event)" (chartClick)="chartClicked($event)">
                    </canvas>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>